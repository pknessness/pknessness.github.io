<!DOCTYPE html>
<html>
<head>
    <title>PID control simulator</title>
    <meta charset="utf-8">
    
    <link rel="stylesheet" href="jquery-ui.css">
    <style>
    </style>
    
    <script src="jquery.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="plot.js"></script>
    <script src="pid.js"></script>
    <script src="pid-autotune.js"></script>
    <script src="main.js"></script>
</head>
<body>
    This is NOT OF MY CREATION, this is a slight modification of an amazing program, and you can find that at https://www.grauonline.de/alexwww/ardumower/pid/pid.html. It has been modified by Anshal Jain (pknessness). Credit goes to the original creators, I'm just modifing it to better fit my needs.
    <br><br>
    This PID control simulator allows you to try out a PID controller interactively by adjusting the tuning parameters in realtime.
    Also, you can adjust the process model by Javascript code below. This simulator was developed by porting the 
    <a href="https://github.com/br3ttb/Arduino-PID-Library">Arduino PID library</a> and the  
    <a href="https://github.com/br3ttb/Arduino-PID-AutoTune-Library">Arduino-PID-AutoTune-Library</a></li> to Javascript.     
    
    <br><br>
    On the right you can see a list, that will record and list the maximum overshoot for any given set of PID values that you've tested, so you can track your progress. It is a tad buggy if you move the setpoint around a lot, so keep that in mind. To test a PID, move the setpoint, wait for it to stabilize, and then do so a few more times. This will give you a general sense of the overshoot of a set of PID tunings.
    <div id="plots" style="display: flex">
        <canvas id="plot1" width="800" height="400"></canvas>   
        <div id="overshot">
            <div id="overshot1">1</div> <br>
            <div id="overshot2">2</div> <br>
            <div id="overshot3">3</div> <br>
            <div id="overshot4">4</div> <br>
            <div id="overshot5">5</div> <br>
            <div id="overshot6">6</div> <br>
            <div id="overshot7">7</div> <br>
            <div id="overshot8">8</div> <br>
            <div id="overshot9">9</div> 
        </div> 
    </div>  
    
    <button id="start">Start</button>
    <button id="stop">Stop</button>
    <button id="toggle">PID is ON</button>
    <!-- time:<span id="time"></span> -->
    Desired:<span id="desired" style="color: #0000FF;"></span>
    Actual:<span id="actual" style="color: #FF0000;"></span>
    Output:<span id="output" style="color: #008f00;"></span>
    <button id="testSequenceButton" onclick="testSequence();">Test Sequence</button>
    
    <!-- <button id="autotune">Auto tune</button>
    tune step <input id="tunestep" type="textbox" size="4" value="50"></input>
    tune noise <input id="tunenoise" type="textbox" size="4" value="1"></input>
    tune start <input id="tunestart" type="textbox" size="4" value="100"></input>
    tune loopback (sec) <input id="tuneloopback" type="textbox" size="4" value="20"></input>
    
    <p> -->
        
        <span style="float:left;margin-right:10px">
            Process example:
            <span style="display:inline-block;width:150px" id="process"></span>
            <div style="display:inline-block;width:100px;margin-right:10px" id="sliderProcess"></div>
        </span>  
        
        <span hidden>  
            Sample time (ms):
            <span style="display:inline-block;width:40px" id="sampletime"></span>
            <div style="display:inline-block;width:100px;margin-left:10px" id="sliderSampletime" ></div>
        </span>
        
        <div>
            Setpoint:
            <span id="setpoint"></span>
            <div style="width:600px" id="sliderSetpoint"></div>
        </div>
        
        <div hidden>
            Noise:
            <span id="noise"></span>
            <div style="width:600px" id="sliderNoise"></div>
        </div>
        
        <div>
            Kp (proportional gain):
            <span id="kp"></span>
            <div style="width:600px" id="sliderKp"></div>
        </div>
        
        <div>
            Ki (integral gain):
            <span id="ki"></span>
            <div style="width:600px" id="sliderKi"></div>
        </div>
        
        <div>
            Kd (derivative gain):
            <span id="kd"></span>
            <div style="width:600px" id="sliderKd"></div>
        </div>
        
        <br>
        
        
        <p>
            <b>Manual tuning hints</b>
            <ul>
                <li>If it overshoots a lot and oscillates, either the integral gain (I) needs to be increased or all gains (P,I,D) should be reduced</li>
                <li>Too much overshoot? Increase D, decrease P.</li>
                <li>Response too damped? Increase P.</li>
                <li>Ramps up quickly to a value below target value and then slows down as it approaches target value? Try increasing the I constant.</li>
            </ul>
        </p>
        
        <div>  
            Process function (model): control input = function(time, input, noise, output, user):<br>  
            <textarea id="processFunc" rows="10" cols="100"></textarea>
            <button id="apply">Apply</button>
            <br>  
            <b>Process function parameters:<br></b>  
            output: control output (PID OUTPUT)<br>
            function return value: control input<br>
            noise: user-defined process noise<br>
            input: last control input (optional)<br>  
            user: custom variable to store long-term data (optional)<br>
            time: current time (ms) (optional)<br>      
        </div>
        <br>
        <div>  
            Test Sequence Parameters:<br>  
            <textarea id="testSequence" rows="10" cols="100">
0MS,-5;
4000MS,100;
8000MS,-150;
12000MS,-180;
14000MS,50;
18000MS,0;
            </textarea>
            <br>  
            <b>Test Sequence parameters:<br></b>  
            [TIME]MS, [POS];<br>      
        </div>
        
        
        <b>Further links</b>
        <ul>
            <li><a href="https://github.com/br3ttb/Arduino-PID-Library">Arduino-PID-Library</a></li>
            <li><a href="https://github.com/br3ttb/Arduino-PID-AutoTune-Library">Arduino-PID-AutoTune-Library</a></li>
        </ul>  
        
        <br>
        <br>
        <br> 
        
    </body>
    </html>
    
    
    